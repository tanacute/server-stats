<!-- 
Author: Tanveer Iqbal
Project : DA90
CR#
Date: 3-March-2017
-->
<!doctype html>
<html lang="en">
    <head>
    	<title>Live Server Monitoring Tool</title>
		<link rel="icon" type="image/png" sizes="96x96" href="favicon.png">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="js/justgage.js"></script>
        <script src="js/nirvana.js"></script>
        <script src="js/raphael-2.1.4.min.js"></script>
        <script src="js/server-monito-1.0.js"></script>
        <script src="js/serverProperties.js"></script>
      
	  <style>

	  	#g1,
	  	#g2,
	  	#g3 {
	  		width: 200px;
	  		height: 160px;
	  		display: inline-block;
	  		margin: 1em;
	  	}

	  	p {
	  		display: block;
	  		width: 450px;
	  		margin: 2em auto;
	  		text-align: left;
	  	}
	  </style>
	</head>
	<body onload="initUMUrl()">
		<a href="/server-stats/report.html" target="_blank"><i class="glyphicon glyphicon-tasks"></i>Show Report</a>
		<div align="center">
		 <table>
		 <tr>
			 <td ><input type="button" id="mixBut" value="Start" style="font-size: 18px; color: #fff;width:100px;height:45px;background-color:#0899CC;border:#0899CC"/></td>
			 <td><a href="/server-stats/report.html" target="_blank"><img id="report"/></a></td>
			<!-- <td><a href="JavaScript:popupwindow('/server-stats/report.html',1296,690);"><img id="report"/></a></td> -->
		 </tr>
		</table>
		</div>
		        <br><br><br><br>
	 <div align="center">
		<h2 style="color:gray">Live Server Stats</h2>
	  
		<div id="g1"></div>
		<div id="g2"></div>
		<div id="g3"></div>
		<div id="g4"></div>
	  
		<div><a href="JavaScript:popupwindow('/server-stats/configTask.html',500,300);"><i class="glyphicon glyphicon-cog"></i> Configuration</a></div>
	 </div>
		<script>
		var g1 = new JustGage({
				id: "g1",
                //gaugeColor: "#404040",
                valueFontColor: "#bfbfbf",
				value: 0,
				min: 0,
				max: 500,
				pointer: true,
				title: "System Threads",
				levelColors: ["#00ff00", "#ff0000"]
			});

			var g2 = new JustGage({
				id: "g2",
                //gaugeColor: "#404040",
                valueFontColor: "#bfbfbf",
				value: 0,
				min: 0,
				max: 100,
				symbol: '%',
				title: "Used Memory",
				levelColors: ["#00ff00", "#ff0000"]
			});
			var g3 = new JustGage({
				id: "g3",
                //gaugeColor: "#404040",
                valueFontColor: "#bfbfbf",
				value: 0,
				min: 0,
				max: 100,
				title: "Service Instance",
				//label: "Service Instance"
			});
			
			var g4 = new JustGage({
				id: "g4",
				value: 0,
				min: 0,
				max: 50,
				donut: true,
				gaugeWidthScale: 0.6,
				counter: true,
				hideInnerShadow: true,
				title: "Users Sesssions"
        });
		</script>
	</body>
	
	
<script type="text/javascript">
	
	var mixBut = document.getElementById("mixBut");

    mixBut.addEventListener("click", Start);

function Start(){
    console.log("Started");
    mixBut.removeEventListener("click", Start);
    mixBut.addEventListener("click", Stop);
    mixBut.value = "Stop";
	report.src="images/inprogress-gif.gif";  // in pgrogress gif
	sendAction('start');
}

function Stop(){
    console.log("Stopped");
    mixBut.removeEventListener("click", Stop);
    mixBut.addEventListener("click", Start);
    mixBut.value = "Start";
    report.src="images/report-2.png";  // generate report hyper link image
	sendAction('stop');
}
	
// function for opening new window
	
	function popupwindow(url, w, h) {
         var w = w;
         var h = h;
        var left = Number((screen.width/2)-(w/2));
        var tops = Number((screen.height/2)-(h/2));

        window.open(url, '', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+tops+', left='+left);
     }
</script>


<script>
	function initUMUrl(){
		var realmURL = Server.um;
		// Save data to sessionStorage
        localStorage.setItem('realmURL', realmURL);
	}
</script>
</html>